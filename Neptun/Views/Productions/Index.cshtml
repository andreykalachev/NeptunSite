@using Neptun.Models.Enum
@model Neptun.Models.ViewModels.ProductIndexViewModel

@{
    ViewBag.Title = "Index";
    var leftArrow = Model.CurrentPage != 0 ? "page-item" : "page-item disabled";
    var rigthArrow = Model.CurrentPage != Model.PageCount - 1 ? "page-item" : "page-item disabled";

    var description = "За качество всей поставляемой продукции несем персональную ответственность";
    var title = "Продукция";

    if (Model.ProductType == ProductType.HfProcessing)
    {
        title = "Аппаратура присоединения к ЛЭП 35-750 кВ";
    }
    if (Model.ProductType == ProductType.HfProtection)
    {
        title = "Аппаратура ВЧ Защиты";
    }
    if (Model.ProductType == ProductType.HfCommunication)
    {
        title = "Аппаратура высокочастотной связи по ЛЭП 35-750 кВ";
        description = "Аппаратура, проверенная временем, надежно зарекомендовавшая себя в энергосистемах";
    }
}



<section class="py-5">
    <div class="container">
        <h2>@title</h2>
        <p class="lead">@description</p>
    </div>
</section>
<div class="container">
    <div class="row">
        @foreach (var item in Model.Products)
        {
            <div class="col-lg-3 col-md-4 col-sm-6 portfolio-item">
                <div class="card h-100">
                    <div class="card-text h-75">
                        <h5 class="card-title text-center">
                            <a href=@Url.Action("Info", "Productions", new {id = item.Id})>@Html.DisplayFor(modelItem => item.Title)</a>
                        </h5>
                    </div>
                    <a href=@Url.Action("Info", "Productions", new {id = item.Id})>
                        <img class="card-img-top" src="@item.Photo" alt="">
                    </a>
                </div>
            </div>
        }
    </div>

    @if (Model.PageCount > 1)
    {
        <nav class="row pl-5">
            <ul class="pagination">
                <li class="@leftArrow">
                    <a class="page-link" tabindex="-1" href=@Url.Action("Index", "Productions", new {page = Model.CurrentPage - 1, productType = Model.ProductType}) aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                @for (var i = 1; i < Model.PageCount + 1; i++)
                {
                    var pageActive = Model.CurrentPage == i - 1 ? "page-item active" : "page-item";
                    <li class="@pageActive"><a class="page-link" href=@Url.Action("Index", "Productions", new {page = i - 1 , productType = Model.ProductType})>@i</a></li>

                }
                <li class="@rigthArrow">
                    <a class="page-link" href=@Url.Action("Index", "Productions", new {page = Model.CurrentPage + 1 , productType = Model.ProductType}) aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
            </ul>
        </nav>

    }

    </div>